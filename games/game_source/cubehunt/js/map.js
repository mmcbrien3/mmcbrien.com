class map{constructor(a){this.objectivePos,this.playerPos,this.isPathwayBool,this.options,this.size,this.graph,this.empties,this.size=a,this.graph=[];for(var b,c=0;c<this.size.height;c++){b=[];for(var d=0;d<this.size.width;d++)b.push("_");this.graph.push(b)}this.empties=this.getEmpties()}addPlayer(a){"undefined"==typeof this.playerPos?(this.playerPos=a,this.graph[Math.floor(this.playerPos.y/50)][Math.floor(this.playerPos.x/50)]="P"):(this.graph[Math.floor(this.playerPos.y/50)][Math.floor(this.playerPos.x/50)]="_",this.playerPos=a,this.graph[Math.floor(this.playerPos.y/50)][Math.floor(this.playerPos.x/50)]="P")}addObjective(a){"undefined"==typeof this.objectivePos?(this.objectivePos=a,this.graph[Math.floor(this.objectivePos.y/50)][Math.floor(this.objectivePos.x/50)]="O"):(this.graph[Math.floor(this.objectivePos.y/50)][Math.floor(this.objectivePos.x/50)]="_",this.objectivePos=a,this.graph[Math.floor(this.objectivePos.y/50)][Math.floor(this.objectivePos.x/50)]="O")}addWalls(a){for(var b=0;b<a.length;b++)this.graph[Math.floor(a[b].y/50)][Math.floor(a[b].x/50)]="X"}addWall(a){this.graph[Math.floor(a.y/50)][Math.floor(a.x/50)]="X"}addWallsInUnreachableLocations(){this.removeObjective();var a=[];this.empties=this.getEmpties();for(var b=0;b<this.empties.length;b++){this.addObjective(this.empties[b]);var c=this.isPathway(this.empties[b]);c||(this.addWall(this.empties[b]),a.push(this.empties[b]))}this.removeObjective();for(var b=0;b<a.length;b++)this.addWall(a[b]);return a}addRandom(a){this.removeObjective(),this.empties=this.getEmpties();var b=Math.floor(Math.random()*this.empties.length),c=this.empties[b];if("objective"===a){this.addObjective(c);for(var d=0;!this.isPathway(c);)this.removeObjective(),this.empties=this.getEmpties(),d+=1,b=Math.floor(Math.random()*this.empties.length),c=this.empties[b],this.addObjective(c)}else this.addWall(c);return c}removeWalls(a){for(var b=0;b<a.length;b++)this.graph[Math.floor(a[b].y/50)][Math.floor(a[b].x/50)]="_"}removeObjective(){"undefined"==typeof this.objectivePos||(this.graph[Math.floor(this.objectivePos.y/50)][Math.floor(this.objectivePos.x/50)]="_",this.objectivePos=void 0)}removePeriods(){for(var a=0;a<this.size.height;a++)for(var b=0;b<this.size.width;b++)"."===this.graph[a][b]&&(this.graph[a][b]="_")}setPlayerToObjective(){var a=this.findItem("O");if(-1!==a.x){var b=this.findItem("P");this.graph[b.y][b.x]="_",this.graph[a.y][a.x]="P"}}findItem(a){for(var b=0;b<this.size.height;b++)for(var c=0;c<this.size.width;c++)if(this.graph[b][c]===a)return{x:c,y:b};return{x:-1,y:-1}}inBounds(a){var b=a.x/50,c=a.y/50,d=0<=b&&b<this.size.width,e=0<=c&&c<this.size.height;return d&&e}checkMove(a){var b={x:0,y:0},c={x:0,y:0},d=this.playerPos;b.x=d.x,b.y=d.y,c.x=b.x,c.y=b.y;var e=!1;return a.left&&(b.x=d.x-5,b.y=d.y,c.x=b.x-(50-b.x%50),c.y=b.y,0==b.y%50&&(e=!0)),a.right&&(b.x=d.x+5,b.y=d.y,c.x=b.x+(50-b.x%50),c.y=b.y,0==b.y%50&&(e=!0)),a.up&&(b.x=d.x,b.y=d.y-5,c.x=b.x,c.y=b.y-(50-b.y%50),0==b.x%50&&(e=!0)),a.down&&(b.x=d.x,b.y=d.y+5,c.x=b.x,c.y=b.y+(50-b.y%50),0==b.x%50&&(e=!0)),e&&"X"!==this.getObject(c)?(this.addPlayer(b),b):{x:-1,y:-1}}isPathway(a){this.options=[];var b=this.objectivePos,c=this.playerPos;this.graph[Math.floor(this.playerPos.y/50)][Math.floor(this.playerPos.x/50)]="_",this.removeObjective(),this.addObjective(a);var d=this.getOptions(this.playerPos);this.options=[],this.isPathwayBool=!1;for(var e=0;e<d.length&&!0!==this.isPathwayBool;e++)if("X"!==d[e].object&&"."!==d[e].object&&"O"!==d[e].object){if(this.graph[Math.floor(d[e].y/50)][Math.floor(d[e].x/50)]=".",this.makeFakeMove(d[e]),!0===this.isPathwayBool)break;this.options.push(d[e])}else if("O"===d[e].object){this.isPathwayBool=!0;break}return this.removePeriods(),this.addPlayer(c),this.removeObjective(),this.addObjective(b),this.isPathwayBool}makeFakeMove(a){for(var b=this.getOptions(a),c=0;c<b.length&&!(!0===this.isPathwayBool);c++)if("X"!==b[c].object&&"."!==b[c].object&&"O"!==b[c].object){if(this.graph[Math.floor(b[c].y/50)][Math.floor(b[c].x/50)]=".",this.makeFakeMove(b[c]),!0===this.isPathwayBool)break;this.options.push(b[c])}else if("O"===b[c].object){this.isPathwayBool=!0;break}}getOptions(a){return a.x=50*Math.floor(a.x/50),a.y=50*Math.floor(a.y/50),this.options=[],this.options.push({object:this.getObject({x:a.x-50,y:a.y}),x:a.x-50,y:a.y}),this.options.push({object:this.getObject({x:a.x+50,y:a.y}),x:a.x+50,y:a.y}),this.options.push({object:this.getObject({x:a.x,y:a.y-50}),x:a.x,y:a.y-50}),this.options.push({object:this.getObject({x:a.x,y:a.y+50}),x:a.x,y:a.y+50}),this.options}getEmpties(a){for(var b=[],c=0;c<this.size.height;c++)for(var d=0;d<this.size.width;d++)"_"===this.graph[c][d]&&b.push({x:50*d,y:50*c});return b}getObject(a){return this.inBounds(a)?this.graph[Math.floor(a.y/50)][Math.floor(a.x/50)]:"X"}}